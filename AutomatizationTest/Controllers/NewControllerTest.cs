using System.Linq; using Microsoft.AspNetCore.Mvc; using System.Threading.Tasks; using SistemaCompensaciones.Data; using SistemaCompensaciones.Models; namespace SistemaCompensaciones.Controllers { public class RegistroHorasExtrasController : Controller { private readonly ApplicationDbContext _context; public RegistroHorasExtrasController(ApplicationDbContext context) { _context = context; } public async Task<IActionResult> Create() { return View(); } [HttpPost] [ValidateAntiForgeryToken] public async Task<IActionResult> Create([Bind("EmpleadoId", "Horas", "Fecha")] RegistroHorasExtras registro) { if (ModelState.IsValid) { registro.Estado = "Pendiente"; _context.Add(registro); await _context.SaveChangesAsync(); return RedirectToAction(nameof(Index)); } return View(registro); } public async Task<IActionResult> Index() { return View(await _context.RegistroHorasExtras.Include(r => r.Empleado).ToListAsync()); } } }